import{a as l,b as p,c as u}from"./chunk-2VMXMS7J.js";var y="__NATIVE_FEDERATION__",E=globalThis;E[y]??={externals:new Map,remoteNamesToRemote:new Map,baseUrlToRemoteNames:new Map};var d=E[y],N=d.externals;function I(e){return`${e.packageName}@${e.version}`}function _(e){let t=I(e);return N.get(t)}function b(e,t){let o=I(e);N.set(o,t)}function R(e,t){return{imports:l(l({},e.imports),t.imports),scopes:l(l({},e.scopes),t.scopes)}}var x=d.remoteNamesToRemote,g=d.baseUrlToRemoteNames;function S(e,t){x.set(e,t),g.set(t.baseUrl,e)}function $(e){return g.get(e)}function P(e){return g.has(e)}function j(e){return x.get(e)}function T(e){document.head.appendChild(Object.assign(document.createElement("script"),{type:"importmap-shim",innerHTML:JSON.stringify(e)}))}function h(e){let t=e.split("/");return t.pop(),t.join("/")}function m(e,t){for(;e.endsWith("/");)e=e.substring(0,e.length-1);return t.startsWith("./")&&(t=t.substring(2,t.length)),`${e}/${t}`}var M=function(e){return e.COMPLETED="federation-rebuild-complete",e.ERROR="federation-rebuild-error",e}(M||{});function v(e){let t=new EventSource(e);t.onmessage=function(o){JSON.parse(o.data).type===M.COMPLETED&&(console.log("[Federation] Rebuild completed, reloading..."),window.location.reload())},t.onerror=function(o){console.warn("[Federation] SSE connection error:",o)}}function B(){return u(this,arguments,function*(e={},t){let o=t?.cacheTag?`?t=${t.cacheTag}`:"",n=typeof e=="string"?yield C(e+o):e,r="./remoteEntry.json"+o,i=yield k(r),s=yield V(i),a=yield D(n,l({throwIfRemoteNotFound:!1},t)),c=R(s,a);return T(c),c})}function C(e){return u(this,null,function*(){return yield fetch(e).then(t=>t.json())})}function D(o){return u(this,arguments,function*(e,t={throwIfRemoteNotFound:!1}){let n=Object.keys(e).map(s=>u(null,null,function*(){try{let a=e[s];if(t.cacheTag){let c=e[s].includes("?")?"&":"?";a+=`${c}t=${t.cacheTag}`}return yield F(a,s)}catch{let c=`Error loading remote entry for ${s} from file ${e[s]}`;if(t.throwIfRemoteNotFound)throw new Error(c);return console.error(c),null}}));return(yield Promise.all(n)).reduce((s,a)=>a?R(s,a):s,{imports:{},scopes:{}})})}function F(e,t){return u(this,null,function*(){let o=h(e),n=yield k(e);t||(t=n.name),n.buildNotificationsEndpoint&&v(o+n.buildNotificationsEndpoint);let r=U(n,t,o);return S(t,p(l({},n),{baseUrl:o})),r})}function U(e,t,o){let n=K(e,t,o),r=A(e,o);return{imports:n,scopes:r}}function k(e){return u(this,null,function*(){return yield fetch(e).then(o=>o.json())})}function A(e,t){let o={},n={};for(let r of e.shared){let i=_(r)??m(t,r.outFileName);b(r,i),n[r.packageName]=i}return o[t+"/"]=n,o}function K(e,t,o){let n={};for(let r of e.exposes){let i=m(t,r.key),s=m(o,r.outFileName);n[i]=s}return n}function V(e,t="./"){return u(this,null,function*(){let o=e.shared.reduce((n,r)=>p(l({},n),{[r.packageName]:t+r.outFileName}),{});for(let n of e.shared)b(n,t+n.outFileName);return{imports:o,scopes:{}}})}function H(e,t){return u(this,null,function*(){let o=z(e,t);yield q(o);let n=L(o),r=j(n),i=o.fallback,s=r?"":"unknown remote "+n;if(!r&&!i)throw new Error(s);if(!r)return w(s),Promise.resolve(i);let a=r.exposes.find(f=>f.key===o.exposedModule),c=a?"":`Unknown exposed module ${o.exposedModule} in remote ${n}`;if(!a&&!i)throw new Error(c);if(!a)return w(c),Promise.resolve(i);let O=m(r.baseUrl,a.outFileName);try{return W(O)}catch(f){if(i)return console.error("error loading remote module",f),i;throw f}})}function W(e){return typeof importShim<"u"?importShim(e):import(e)}function L(e){let t;if(e.remoteName)t=e.remoteName;else if(e.remoteEntry){let o=h(e.remoteEntry);t=$(o)}else throw new Error("unexpcted arguments: Please pass remoteName or remoteEntry");if(!t)throw new Error("unknown remoteName "+t);return t}function q(e){return u(this,null,function*(){if(e.remoteEntry&&!P(h(e.remoteEntry))){let t=yield F(e.remoteEntry);T(t)}})}function z(e,t){let o;if(typeof e=="string"&&t)o={remoteName:e,exposedModule:t};else if(typeof e=="object"&&!t)o=e;else throw new Error("unexpected arguments: please pass options or a remoteName/exposedModule-pair");return o}function w(e){typeof window<"u"&&console.error(e)}export{B as a,H as b};
