import{b as s}from"./chunk-BJE3JKBP.js";import{a as A,b as S,c as n}from"./chunk-2VMXMS7J.js";import{bootstrapApplication as X}from"@angular/platform-browser";import{provideBrowserGlobalErrorListeners as _,provideZoneChangeDetection as $}from"@angular/core";import{provideRouter as D}from"@angular/router";import{provideFirebaseApp as J,initializeApp as L}from"@angular/fire/app";import{provideAuth as G,getAuth as K}from"@angular/fire/auth";import{inject as g}from"@angular/core";import{Router as U}from"@angular/router";import{HttpHeaders as H}from"@angular/common/http";import{from as P}from"rxjs";import{switchMap as m}from"rxjs/operators";import*as l from"@angular/core";import*as b from"@angular/common/http";import{runInInjectionContext as M}from"@angular/core";import*as c from"@angular/core";var h=class e{constructor(t){this.injector=t}remote;readyPromise;initRemote(){return this.readyPromise||(this.readyPromise=n(this,null,function*(){let t=yield s({remoteName:"auth",exposedModule:"./AuthService"});return this.remote=M(this.injector,()=>new t.AuthService),this.remote})),this.readyPromise}authorizationHeader(t=200,o=10){return n(this,null,function*(){let r=yield this.initRemote(),i,y=0;do{if(i=yield r.authorizationHeader(),i)break;if(y++,y>=o)throw new Error("Auth header not ready after max retries");yield new Promise(T=>setTimeout(T,t))}while(!i);return i})}static \u0275fac=function(o){return new(o||e)(c.\u0275\u0275inject(c.EnvironmentInjector))};static \u0275prov=c.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})};var f=class e{constructor(t,o){this.http=t;this.auth=o}withAuthHeaders(t){return P(this.auth.authorizationHeader()).pipe(m(o=>{let r=new H(S(A({},t?.headers??{}),{Authorization:o}));return[S(A({},t),{headers:r})]}))}get(t,o){return this.withAuthHeaders(o).pipe(m(r=>this.http.get(t,r)))}post(t,o,r){return this.withAuthHeaders(r).pipe(m(i=>this.http.post(t,o,i)))}put(t,o,r){return this.withAuthHeaders(r).pipe(m(i=>this.http.put(t,o,i)))}delete(t,o){return this.withAuthHeaders(o).pipe(m(r=>this.http.delete(t,r)))}static \u0275fac=function(o){return new(o||e)(l.\u0275\u0275inject(b.HttpClient),l.\u0275\u0275inject(h))};static \u0275prov=l.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})};import{EMPTY as k,catchError as x,lastValueFrom as F,map as B}from"rxjs";import*as w from"@angular/core";var p=class e{http=g(f);router=g(U);accountType=null;baseUrl="http://localhost:8080/mbe-user/api/v1";isBusinessAccount(){return this.accountType==="BUSINESS"}isPersonalAccount(){return this.accountType==="PERSONAL"}checkAccountType(t){return n(this,null,function*(){let o=this.http.get(`${this.baseUrl}/users/check-account-type?username=${t}`).pipe(B(r=>{this.accountType=r.accountType}),x(r=>{throw this.router.navigate(["/lk/feeds"]),k}));return F(o)})}static \u0275fac=function(o){return new(o||e)};static \u0275prov=w.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})};import{inject as z}from"@angular/core";import{inject as N}from"@angular/core";var E=e=>n(null,null,function*(){let t=e.paramMap.get("username");return yield N(p).checkAccountType(t)});var I=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",title:"Job Plataform",loadComponent:()=>import("./chunk-5WER6CR2.js").then(e=>e.HomeComponent)},{path:"lk",loadComponent:()=>import("./chunk-IZYGT6E3.js").then(e=>e.ShellComponent),children:[{path:"",pathMatch:"full",redirectTo:"feeds"},{path:"feeds",loadChildren:()=>s("feed","./POSTS_ROUTES").then(e=>e.POSTS_ROUTES)},{path:":username",resolve:{AccountTypeResolver:E},loadChildren:()=>z(p).isBusinessAccount()?s("business","./ME_ROUTES").then(t=>t.ME_ROUTES):s("user","./ME_ROUTES").then(t=>t.ME_ROUTES)}]},{path:"auth",loadComponent:()=>import("./chunk-3NOSIJHI.js").then(e=>e.EmptyShellComponent),loadChildren:()=>s("auth","./AUTH_ROUTES").then(e=>e.AUTH_ROUTES)}];import{provideHttpClient as W}from"@angular/common/http";var j={providers:[_(),$({eventCoalescing:!0}),D(I),W(),J(()=>L({apiKey:"AIzaSyBx4JaidDuAlJPtIfWGvc6xc7feBKOMz0M",authDomain:"authentication-lkhadma-ma.firebaseapp.com",projectId:"authentication-lkhadma-ma",storageBucket:"authentication-lkhadma-ma.firebasestorage.app",messagingSenderId:"21675652332",appId:"1:21675652332:web:41a32ad4633b0be3a6e1c9",measurementId:"G-SXWBJ45FPY"})),G(()=>K())]};import{RouterOutlet as Y}from"@angular/router";function u(e){return n(this,null,function*(){try{let r=(yield(yield fetch("federation.manifest.json")).json())[e];if(!r){console.error(`Failed to load remote styles: No entry found for "${e}"`);return}let i=r.replace("/remoteEntry.json",""),R=(yield(yield fetch(`${i}/styles-manifest.json`)).json()).styles;if(!R){console.error(`Failed to load remote styles: No "styles" found in styles-manifest.json for "${e}"`);return}let C=`${i}/${R}`,v=document.createElement("link");v.rel="stylesheet",v.href=C,document.head.appendChild(v)}catch(t){console.error("Failed to load remote styles:",t)}})}import*as a from"@angular/core";function V(e,t){}var d=class e{ngOnInit(){return n(this,null,function*(){yield u("auth"),yield u("shared"),yield u("feed"),yield u("user")})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["plataform-shell"]],decls:3,vars:0,consts:[["alert",""]],template:function(o,r){o&1&&(a.\u0275\u0275element(0,"router-outlet"),a.\u0275\u0275template(1,V,0,0,"ng-template",null,0,a.\u0275\u0275templateRefExtractor))},dependencies:[Y],encapsulation:2})};X(d,j).catch(e=>console.error(e));
